!function(){"use strict";window.__&&console.error("Another instance of lean detected")}();var __={env:{},load:function(e){var t=__.onReady(e);if(__.env.supportNative)document.addEventListener("deviceready",t,!1),__.env.loaded||__.dom.link("cordova.js","js");else{if("complete"===document.readyState)return t();window.addEventListener("load",t,!1)}__.env.loaded=1},onReady:function(n){return function(e){return 2===__.env.loaded?e():(n.push(e),function(){for(var e,t=0;e=n[t];t++)e();__.env.loaded=2,n.length=0})}}([]),dummyCB:function(){},dotchain:function e(t,n){if(!n||!n.length)return t;var o=t[n.shift()];return o?e(o,n):0},querystring:function(n){return Object.keys(n).reduce(function(e,t){return e.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t])),e},[]).join("&")},ajax:function(n,e,o,r,a,i){if(a=a||function(e){e&&console.error(e)},!e)return a("url not defined");n=n.toUpperCase(),o=o||{},r=r||{};var c=new XMLHttpRequest,t=null==r.useBody?"GET"!==n:r.useBody,u=null==r.useURL?!t:r.useURL,s=o.charAt?1:o instanceof FormData?3:2;if(e=encodeURI(e),t&&2===s&&(o=JSON.stringify(o)),u&&(e+=(-1===e.indexOf("?")?"?":"&")+"appVer="+__.env.appVer||0,o)){switch(e+="&",s){case 1:e+=encodeURIComponent(o);break;case 2:e+=__.querystring(o);break;case 3:return a("FormData with GET method is not supported yet")}o=null}c.open(n,e,!r.sync,r.un,r.passwd),c.timeout=r.timeout||0,c.responseType=r.responseType||"",c.onreadystatechange=function(){if(1<c.readyState){var e,t=c.status;return 300<=t&&t<400&&(e=c.getResponseHeader("location"))?__.ajax(n,e,o,r,a,i):(c.onerror=void 0,a(t<300||!t&&c.response?null:{error:c.statusText,code:t},c.readyState,c.response,i))}},c.ontimeout=c.onerror=function(e){a({error:c.statusText,code:c.status,src:e,params:arguments},c.readyState,null,i)};var d="Content-Type",l=r.headers;if(t&&(!l||!l[d])&&o)switch(s){case 1:case 2:c.setRequestHeader(d,"text/plain");break;case 3:c.setRequestHeader(d,"multipart/form-data")}for(var f in l)c.setRequestHeader(f,l[f]);return c.send(o),c},escapeXML:function(e){var t=document.createElement("p");return t.appendChild(document.createTextNode(e)),t.innerHTML},createEvent:function(e,t,n,o){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n||!1,o||!1,t),r},detectEvent:function(e,t){var n=document.createElement(t||"div"),o=(e="on"+e)in n||e in window;return o||(n.setAttribute(e,""),o="function"==typeof n[e],n[e]=void 0,n.removeAttribute(e)),n=void 0,o}};!function(){"use strict";var e=__.env,t=document.querySelector("meta[name=app-version]"),n="transitionend",o="webkitTransitionEnd";e.transitionEnd=__.detectEvent(n)?n:__.detectEvent(o.toLowerCase())?o:void 0,e.supportPassive=!1;try{window.addEventListener("t",null,Object.defineProperty({},"passive",{get:function(){return e.supportPassive=!0}}))}catch(e){}if(e.appVer=t?t.getAttribute("content"):"0",e.loaded=0,e.supportNative=!1,-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")){var r=document.querySelector("meta[name=app-support-native]");e.supportNative=!!r&&"1"===r.getAttribute("content")}}(),function(){"use strict";__.onReady(function(){__.device=__.dotchain(window,["device"])||function(e,t){for(var n,o,r=e.userAgent,a="",i=0;n=t[i];i++)if(~(o=r.indexOf(n))){a=r.substr(o+n.length+1).split(/[ ;]+/,1)[0];break}return{model:n||"",version:a,platform:"web",manufacturer:e.vendor||"",cordova:0,uuid:Math.random().toString(36).substr(2)+Date.now().toString(36),isVirtual:!1,serial:""}}(navigator,["Trident","Edge","Chromium","Chrome","Safari","Firefox","OPR","Opera"])})}(),function(){"use strict";__.onReady(function(){var a=__.dotchain(window,["navigator","notification"]);__.dialogs=a?{alert:function(e,t,n,o){a.alert(e,o||__.dummyCB,t,n)},confirm:function(e,t,n,o){a.confirm(e,o,t,n)},prompt:function(e,t,n,o,r){a.prompt(e,r,t,n,o)},beep:function(e){a.beep(e)}}:{alert:function(e,t,n,o){setTimeout(function(){alert(e),(o||__.dummyCB)()},0)},confirm:function(e,t,n,o){setTimeout(function(){o(confirm(e)?1:2)},0)},prompt:function(t,e,n,o,r){setTimeout(function(){var e=prompt(t,o);r({buttonIndex:e?1:2,input1:e})},0)},beep:function(){console.log("beep")}}})}(),function(){"use strict";var i=document.head||document.getElementsByTagName("head")[0],c=["el","tagName","tag","id","className","class","dataset","data","style","content"],n=function(e,t){if(e){for(;e.hasChildNodes();)n(e.lastChild);!t&&e.parentElement&&e.parentElement.removeChild(e)}},o=function(e){if(e){if(e instanceof HTMLElement)return e;var t=e.el;return t?t.charAt&&(t=document.querySelector(t)):t=document.createElement(e.tag||e.tagName||"div"),a(t,e.id),u(t.classList,e.class||e.className),s(t.dataset,e.data||e.dataset),d(t,e),f(e.style),l(t,e.content)}},r=function(e,t,n){return n>=t.length?e:(e.appendChild(o(t[n++])),r(e,t,n))},a=function(e,t){t&&(e.id=t)},u=function(e,t){t&&t.length&&e.add.apply(e,Array.isArray(t)?t:t.split(" "))},s=function(e,t){if(t)for(var n,o=0,r=Object.keys(t);n=r[o];o++)e[n]=t[n]},d=function(e,t){if(t)for(var n,o,r=0,a=Object.keys(t);n=a[r];r++)~c.indexOf(n)||(null==(o=t[n])?e.removeAttribute(n):e.setAttribute(n,o))},l=function(e,t){return null==t?e:t.charAt?(e.innerHTML=t,e):r(e,t,0)},f=function(e){if(e)for(var t,n,o=Object.keys(e),r=0;t=o[r];r++)(n=i.querySelector('style[src="'+t+'"]'))?n.dataset.rc=1+parseInt(n.dataset.rc):((n=document.createElement("style")).setAttribute("src",t),n.dataset.rc=1,n.appendChild(document.createTextNode(e[t])),i.appendChild(n))},v=function(e){if(e)for(var t,n,o,r=Object.keys(e),a=0;t=r[a];a++)(n=i.querySelector('style[src="'+t+'"]'))&&((o=n.dataset).rc=parseInt(o.rc)-1,o.rc<=0&&n.parentNode.removeChild(n))};__.dom={link:function(e,t,n){var o;switch(t){case"js":return(o=document.createElement("script")).setAttribute("src",e),o.onload=n,o.onerror=n,void i.insertBefore(o,i.lastChild);case"css":return(o=document.createElement("link")).setAttribute("rel","stylesheet"),o.setAttribute("href",e),i.insertBefore(o,i.lastChild),setTimeout(n,0);default:return n()}},unlink:function(e,t){var n,o;switch(t){case"js":o=document.getElementsByTagName("script"),n="src";break;case"css":o=document.getElementsByTagName("link"),n="href";break;default:return}for(var r,a,i=o.length-1;r=o[i];i--)(a=r.getAttribute(n))&&~a.indexOf(e)&&r.parentNode.removeChild(r)},setId:a,setClasses:u,setAttributes:d,setContent:l,get:o,forget:function(e,t){n(e,!!t.el),v(t.style)},style:f,unstyle:v}}(),function(){"use strict";if(!__.detectEvent("touchstart")){var t=!__.env.supportPassive||{capture:!0,passive:!0},a="mousedown",i="mouseup",c="mousemove",n=function(e){var t;switch(e.type){case a:t="touchstart";break;case i:t="touchend";break;case c:t="touchmove";break;default:return console.error("wrong event: "+e.type)}var n=e.target,o=[{pageX:e.pageX,pageY:e.pageY,target:n}],r=__.createEvent(t,null,e.bubbles,e.cancelable);r.pageX=e.pageX,r.pageY=e.pageY,r.touches=r.changedTouches=r.targetTouches=o,r.mouseToTouch=!0,n.dispatchEvent(r)},o=function(){document.removeEventListener(a,r,t),document.removeEventListener(c,u,t),document.removeEventListener(i,s,t)},r=function(e){o(),document.addEventListener(c,u,t),document.addEventListener(i,s,t),n(e)},u=function(e){n(e)},s=function(e){o(),document.addEventListener(a,r,t),n(e)};document.addEventListener(a,r,t)}}(),function(){"use strict";__.onReady(function(){var t,n=__.dotchain(window,["sqlitePlugin"]),e=__.dotchain(window,["openDatabase"]),r=function(e){if(e)return console.error(e)},o={};n||e?(t=function(e){var t;(t=n?n.openDatabase({name:e,location:"default"}):openDatabase(e,"1.0","lean local storage emulator",52428800)).transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS kv (key TEXT UNIQUE NOT NULL, val TEXT);",null,null,function(e,t){console.error(t)})}),this.db=t}).prototype={key:function(o,r){this.db.readTransaction(function(e){e.executeSql("SELECT key FROM KV order by oid ASC;",null,function(e,t){var n=t.rows;if(n.length<=o)return r();r(null,n[o].key)},function(e,t){r(t)})})},getItem:function(t,n){this.db.readTransaction(function(e){e.executeSql("SELECT val FROM kv WHERE key=?;",[t],function(e,t){if(!t.rows.length)return n();n(null,t.rows[0].val)},function(e,t){n(t)})})},setItem:function(t,n,o){o=o||r,this.db.transaction(function(e){e.executeSql("INSERT OR REPLACE INTO kv (oid,key,val) VALUES ((SELECT oid FROM kv WHERE key=?), ?, ?);",[t,t,n],function(e,t){o(null,t.insertId)},function(e,t){o(t)})})},removeItem:function(t,n){n=n||r,this.db.transaction(function(e){e.executeSql("DELETE FROM kv WHERE key=?;",[t],function(e,t){n()},function(e,t){n(t)})})},clear:function(n){n=n||r,this.db.transaction(function(e){e.executeSql("DELETE FROM kv;",null,function(e,t){n()},function(e,t){n(t)})})},length:function(n){this.db.readTransaction(function(e){e.executeSql("SELECT count(*) AS len FROM KV;",null,function(e,t){n(null,t.rows[0].len)},function(e,t){n(t)})})}}:(t=function(e){this.prefix=e+"_",this.db=window.localStorage}).prototype={key:function(e,t){t(null,this.db.key(e))},getItem:function(e,t){t(null,this.db.getItem(this.prefix+e))},setItem:function(e,t,n){n=n||r;try{n(null,this.db.setItem(this.prefix+e,t))}catch(e){n(e)}},removeItem:function(e,t){(t=t||r)(null,this.db.removeItem(this.prefix+e))},clear:function(e){(e=e||r)(null,this.db.clear())},length:function(e){e(null,this.db.length)}},__.store=function(e){return o[e=e||"localstorage"]=o[e]||new t(e)}})}(),function(){"use strict";var n,o,e=!__.env.supportPassive||{capture:!0,passive:!0},r=0,a=1,i=0,c=0,u=function(e){return[e.pageX,e.pageY]},t=function(e){r||(r=1,e.target.dispatchEvent(__.createEvent("longTap",o,!0)))};document.addEventListener("touchstart",function(e){r=0,a=1,o=n=u(e.touches[0]),i=window.setTimeout(t,2e3,e)},e),document.addEventListener("touchend",function(e){if(window.clearTimeout(i),a=0,!r){var t=Date.now();t-c<300?(e.target.dispatchEvent(__.createEvent("taps",o,!0)),c=0):(e.target.dispatchEvent(__.createEvent("tap",o,!0)),c=t)}},e),document.addEventListener("touchmove",function(e){var t=u(e.touches[0]);a&&e.target.dispatchEvent(__.createEvent("rub",[o[0],o[1],t[0],t[1]],!0)),!r&&(t[0]>n[0]+9||t[0]<n[0]-9)&&(r=1),o=t},e),document.addEventListener("touchcancel",function(e){r=1,a=0,window.clearTimeout(i)},e)}();
//# sourceMappingURL=bin/lean.min.js.map